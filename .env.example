# WordPress MCP Server v2.5.0 - Environment Variables Example
# Copy this file to .env and fill in your actual values

# ============================================
# API Security (REQUIRED for HTTP API)
# ============================================
# Shared API key for all clients (used with GET /api/find)
# Generate with: openssl rand -hex 32
API_KEY=your-secret-api-key-here

# ============================================
# Server Configuration
# ============================================
PORT=8080

# ============================================
# Default Client Configuration
# ============================================
# Used when no client parameter is specified, or ACTIVE_CLIENT=default
WP_API_URL=https://your-wordpress-site.com
WP_API_USERNAME=admin
WP_API_PASSWORD=your-app-password-here

# WooCommerce API Credentials (optional - only if using wc_* tools)
# WC_CONSUMER_KEY=ck_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# WC_CONSUMER_SECRET=cs_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional: Set which client to use as default for MCP protocol
# ACTIVE_CLIENT=default

# ============================================
# Multi-Client Configuration (Optional)
# ============================================
# To support multiple WordPress sites, define additional clients:

# Client 1
# CLIENT1_WP_API_URL=https://client1.com
# CLIENT1_WP_API_USERNAME=admin
# CLIENT1_WP_API_PASSWORD=xxxx xxxx xxxx xxxx
# CLIENT1_WC_CONSUMER_KEY=ck_xxxx
# CLIENT1_WC_CONSUMER_SECRET=cs_xxxx

# Client 2
# CLIENT2_WP_API_URL=https://client2.com
# CLIENT2_WP_API_USERNAME=admin
# CLIENT2_WP_API_PASSWORD=yyyy yyyy yyyy yyyy
# CLIENT2_WC_CONSUMER_KEY=ck_yyyy
# CLIENT2_WC_CONSUMER_SECRET=cs_yyyy

# Client 3
# CLIENT3_WP_API_URL=https://client3.com
# CLIENT3_WP_API_USERNAME=admin
# CLIENT3_WP_API_PASSWORD=zzzz zzzz zzzz zzzz
# CLIENT3_WC_CONSUMER_KEY=ck_zzzz
# CLIENT3_WC_CONSUMER_SECRET=cs_zzzz

# ============================================
# Usage Examples
# ============================================

# Example 1: Default client (no client parameter)
# GET /api/find?slug=about-us
# Uses: WP_API_URL, WP_API_USERNAME, WP_API_PASSWORD

# Example 2: Specific client
# GET /api/find?slug=about-us&client=client1
# Uses: CLIENT1_WP_API_URL, CLIENT1_WP_API_USERNAME, CLIENT1_WP_API_PASSWORD

# Example 3: With API Key in header
# curl -H "X-API-Key: your-secret-api-key-here" \
#      "http://localhost:8080/api/find?slug=about-us&client=client1"

# ============================================
# How to get WordPress Application Passwords
# ============================================
# 1. Login to your WordPress admin panel
# 2. Go to: Users → Profile → Application Passwords
# 3. Enter a name (e.g., "MCP Server") and click "Add New Application Password"
# 4. Copy the generated password (format: xxxx xxxx xxxx xxxx xxxx xxxx)
# 5. Paste it in WP_API_PASSWORD above (spaces are OK, will be handled automatically)

# ============================================
# How to get WooCommerce API Keys (for wc_* tools)
# ============================================
# 1. Login to your WordPress admin panel
# 2. Go to: WooCommerce → Settings → Advanced → REST API
# 3. Click "Add key"
# 4. Enter a description (e.g., "MCP Server")
# 5. Set Permissions to "Read/Write"
# 6. Click "Generate API key"
# 7. Copy the Consumer Key (starts with ck_) and Consumer Secret (starts with cs_)
# 8. IMPORTANT: Save these immediately! The secret won't be shown again.

# ============================================
# Security Best Practices
# ============================================
# 1. ALWAYS set API_KEY in production environments
# 2. Use strong, unique Application Passwords for each client
# 3. Use HTTPS with reverse proxy (nginx/caddy) in production
# 4. Restrict access by IP if possible
# 5. Rotate Application Passwords regularly
# 6. Never commit .env file to git (it's already in .gitignore)
# 7. Set appropriate file permissions: chmod 600 .env

# ============================================
# Notes
# ============================================
# - The /api/find endpoint searches both posts and pages automatically
# - Returns the first match found (posts searched first, then pages)
# - Supports search by: slug, url (full URL), or search (text search)
# - MCP protocol endpoint (POST /mcp) still works as before

# ============================================
# Automatic Client Detection (Smart Feature!)
# ============================================
# When you provide a full URL to /api/find, the system automatically detects
# which WordPress site to query by matching the domain in the URL to your configs.
#
# Example:
# If you have:
#   WP_API_URL=https://mainsite.com
#   CLIENT1_WP_API_URL=https://blog.example.com
#
# Then these requests work automatically (no &client= needed):
#   GET /api/find?url=https://mainsite.com/about
#   → Uses WP_API_URL credentials (default)
#
#   GET /api/find?url=https://blog.example.com/post-123
#   → Automatically detects and uses CLIENT1 credentials!
#
# Manual override still works:
#   GET /api/find?url=https://anywhere.com&client=client2
#   → Forces CLIENT2 regardless of domain
